# Requests API - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏

API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –Ω–∞ —É—Å–ª—É–≥–∏ –ø–æ –≤—ã–≥—É–ª—É –∏ —É—Ö–æ–¥—É –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã–º–∏.

## üìã –¢–∏–ø—ã —É—Å–ª—É–≥

- `walking` - –í—ã–≥—É–ª
- `care` - –£—Ö–æ–¥
- `overnight` - –ü–µ—Ä–µ–¥–µ—Ä–∂–∫–∞
- `grooming` - –ì—Ä—É–º–∏–Ω–≥

## üîÑ –°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫

- `pending` - –û–∂–∏–¥–∞–µ—Ç –ø—Ä–∏–Ω—è—Ç–∏—è –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä–æ–º
- `accepted` - –ü—Ä–∏–Ω—è—Ç–∞ –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä–æ–º
- `in_progress` - –í —Ä–∞–±–æ—Ç–µ
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω–∞
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω–∞

## üìù Workflow –∑–∞—è–≤–∫–∏

1. **–ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É** ‚Üí `pending`
2. **–ü–µ—Ç—Å–∏—Ç—Ç–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç** ‚Üí `accepted`
3. **–ü–µ—Ç—Å–∏—Ç—Ç–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É** ‚Üí `in_progress`
4. **–ü–µ—Ç—Å–∏—Ç—Ç–µ—Ä –∑–∞–≤–µ—Ä—à–∞–µ—Ç** ‚Üí `completed`

–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

---

## üîê –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
**POST** `/requests` üîí (–¢–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—ã)

**Body:**
```json
{
  "petId": "697117d676bbc3be9cb8c710",
  "serviceType": "walking",
  "startDate": "2026-01-25T10:00:00.000Z",
  "endDate": "2026-01-25T12:00:00.000Z",
  "description": "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —É—Ç—Ä–æ–º",
  "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1",
  "price": 500
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ñ–∏–≤–æ—Ç–Ω–æ–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É
- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è > –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
- –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º
- –¶–µ–Ω–∞ >= 0

**Response (201):**
```json
{
  "_id": "697117d676bbc3be9cb8c720",
  "clientId": "697117d676bbc3be9cb8c700",
  "petId": "697117d676bbc3be9cb8c710",
  "serviceType": "walking",
  "startDate": "2026-01-25T10:00:00.000Z",
  "endDate": "2026-01-25T12:00:00.000Z",
  "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1",
  "price": 500,
  "status": "pending",
  "createdAt": "2026-01-21T19:00:00.000Z"
}
```

---

### 2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
**GET** `/requests?status=pending`

**Query Parameters:**
- `status` (optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É

**Response (200):**
```json
[
  {
    "_id": "697117d676bbc3be9cb8c720",
    "clientId": {
      "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "email": "ivan@example.com"
    },
    "petId": {
      "name": "–ë–æ–±–∏–∫",
      "type": "dog",
      "breed": "–õ–∞–±—Ä–∞–¥–æ—Ä"
    },
    "serviceType": "walking",
    "startDate": "2026-01-25T10:00:00.000Z",
    "endDate": "2026-01-25T12:00:00.000Z",
    "price": 500,
    "status": "pending"
  }
]
```

---

### 3. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞—è–≤–∫–∏ –¥–ª—è –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä–æ–≤
**GET** `/requests/pending`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`.

---

### 4. –ú–æ–∏ –∑–∞—è–≤–∫–∏
**GET** `/requests/my` üîí

- –î–ª—è **–∫–ª–∏–µ–Ω—Ç–∞**: —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏
- –î–ª—è **–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä–∞**: –ø—Ä–∏–Ω—è—Ç—ã–µ –∑–∞—è–≤–∫–∏

---

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**GET** `/requests/statistics` üîí

**Response (200):**
```json
{
  "total": 10,
  "byStatus": {
    "pending": 2,
    "accepted": 1,
    "in_progress": 3,
    "completed": 3,
    "cancelled": 1
  }
}
```

---

### 6. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ
**GET** `/requests/:id`

**Response (200):**
```json
{
  "_id": "697117d676bbc3be9cb8c720",
  "clientId": {
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "email": "ivan@example.com",
    "phone": "+79001234567",
    "address": "–≥. –ú–æ—Å–∫–≤–∞"
  },
  "petId": {
    "_id": "697117d676bbc3be9cb8c710",
    "name": "–ë–æ–±–∏–∫",
    "type": "dog",
    "breed": "–õ–∞–±—Ä–∞–¥–æ—Ä",
    "age": 3,
    "size": "medium",
    "specialNeeds": "–ë–æ–∏—Ç—Å—è –≥—Ä–æ–º–∫–∏—Ö –∑–≤—É–∫–æ–≤"
  },
  "petsitterId": {
    "name": "–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞",
    "rating": 4.8,
    "reviewsCount": 15
  },
  "serviceType": "walking",
  "startDate": "2026-01-25T10:00:00.000Z",
  "endDate": "2026-01-25T12:00:00.000Z",
  "description": "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ",
  "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1",
  "price": 500,
  "status": "in_progress",
  "notes": "–ü—Ä–æ–≥—É–ª–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å, –∂–∏–≤–æ—Ç–Ω–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ"
}
```

---

### 7. –ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É
**POST** `/requests/:id/accept` üîí (–¢–æ–ª—å–∫–æ –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä—ã)

–ü–µ—Ç—Å–∏—Ç—Ç–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞—è–≤–∫—É –≤ —Ä–∞–±–æ—Ç—É.

**–£—Å–ª–æ–≤–∏—è:**
- –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `pending`
- –ó–∞—è–≤–∫–∞ –µ—â–µ –Ω–µ –ø—Ä–∏–Ω—è—Ç–∞ –¥—Ä—É–≥–∏–º –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä–æ–º

**Response (200):**
```json
{
  "_id": "697117d676bbc3be9cb8c720",
  "petsitterId": "697117d676bbc3be9cb8c703",
  "status": "accepted",
  ...
}
```

---

### 8. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
**PATCH** `/requests/:id/status` üîí

**Body:**
```json
{
  "status": "in_progress",
  "notes": "–ù–∞—á–∞–ª –ø—Ä–æ–≥—É–ª–∫—É"
}
```

**–ü–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤:**
```
pending ‚Üí accepted, cancelled
accepted ‚Üí in_progress, cancelled
in_progress ‚Üí completed, cancelled
completed ‚Üí (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å)
cancelled ‚Üí (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å)
```

**–ü—Ä–∞–≤–∞:**
- `in_progress`, `completed` - —Ç–æ–ª—å–∫–æ –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä
- `cancelled` - –∫–ª–∏–µ–Ω—Ç –∏–ª–∏ –ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä

**Response (200):**
```json
{
  "_id": "697117d676bbc3be9cb8c720",
  "status": "in_progress",
  "notes": "–ù–∞—á–∞–ª –ø—Ä–æ–≥—É–ª–∫—É",
  ...
}
```

---

### 9. –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É
**DELETE** `/requests/:id` üîí (–¢–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—ã)

–ö–ª–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞—è–≤–∫—É.

**–£—Å–ª–æ–≤–∏—è:**
- –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞—è–≤–∫–∏
- –ù–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é –∑–∞—è–≤–∫—É

**Response (204):** No Content

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (–∫–ª–∏–µ–Ω—Ç)

```bash
POST http://localhost:3110/requests
Authorization: Bearer CLIENT_TOKEN
Content-Type: application/json

{
  "petId": "PET_ID",
  "serviceType": "walking",
  "startDate": "2026-01-25T10:00:00.000Z",
  "endDate": "2026-01-25T12:00:00.000Z",
  "address": "–≥. –ú–æ—Å–∫–≤–∞, –ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ",
  "price": 500,
  "description": "–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ 2 —á–∞—Å–∞"
}
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫ (–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä)

```bash
GET http://localhost:3110/requests/pending
```

### –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–∫–∏ (–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä)

```bash
POST http://localhost:3110/requests/REQUEST_ID/accept
Authorization: Bearer PETSITTER_TOKEN
```

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã (–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä)

```bash
PATCH http://localhost:3110/requests/REQUEST_ID/status
Authorization: Bearer PETSITTER_TOKEN
Content-Type: application/json

{
  "status": "in_progress",
  "notes": "–í—Å—Ç—Ä–µ—Ç–∏–ª—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º, –Ω–∞—á–∏–Ω–∞—é –ø—Ä–æ–≥—É–ª–∫—É"
}
```

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä)

```bash
PATCH http://localhost:3110/requests/REQUEST_ID/status
Authorization: Bearer PETSITTER_TOKEN
Content-Type: application/json

{
  "status": "completed",
  "notes": "–ü—Ä–æ–≥—É–ª–∫–∞ –ø—Ä–æ—à–ª–∞ –æ—Ç–ª–∏—á–Ω–æ, –∂–∏–≤–æ—Ç–Ω–æ–µ –¥–æ–≤–æ–ª—å–Ω–æ–µ –∏ —É—Å—Ç–∞–≤—à–µ–µ"
}
```

---

## üîí –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–ª–∏–µ–Ω—Ç | –ü–µ—Ç—Å–∏—Ç—Ç–µ—Ä |
|----------|--------|-----------|
| –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É | ‚úÖ | ‚ùå |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫ | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫ | ‚úÖ | ‚úÖ |
| –ü—Ä–∏–Ω—è—Ç—å –∑–∞—è–≤–∫—É | ‚ùå | ‚úÖ |
| –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–≤ —Ä–∞–±–æ—Ç–µ" | ‚ùå | ‚úÖ |
| –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–∑–∞–≤–µ—Ä—à–µ–Ω–æ" | ‚ùå | ‚úÖ |
| –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É | ‚úÖ (—Ç–æ–ª—å–∫–æ —Å–≤–æ—é) | ‚ùå |

---

## ‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### 400 Bad Request - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```json
{
  "statusCode": 400,
  "message": "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞"
}
```

### 400 Bad Request - –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞
```json
{
  "statusCode": 400,
  "message": "–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ \"completed\" –≤ \"in_progress\""
}
```

### 403 Forbidden - –ù–µ—Ç –ø—Ä–∞–≤
```json
{
  "statusCode": 403,
  "message": "–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö"
}
```

### 404 Not Found
```json
{
  "statusCode": 404,
  "message": "–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Swagger

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3110/api
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å:
   - –ö–∞–∫ **–∫–ª–∏–µ–Ω—Ç** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
   - –ö–∞–∫ **–ø–µ—Ç—Å–∏—Ç—Ç–µ—Ä** –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞—è–≤–æ–∫
3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ workflow –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ –ø–æ–ª–µ `description`
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–æ–ª–µ `notes` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/requests/statistics` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
